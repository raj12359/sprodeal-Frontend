<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spro Deal Login</title>

    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body {
        background: linear-gradient(#8dc63f, #7fbe3f);
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
      }
      .top-section { text-align: center; color: white; margin: 20px 0; }
      .top-section img { width: 90px; height: 90px; border-radius: 50%; }
      .top-section h1 { margin-top: 10px; font-size: 24px; font-weight: bold; }
      .top-section p { margin-top: 5px; font-size: 15px; }

      form {
        height: 480px;
        width: 90%;
        max-width: 380px;
        background: white;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        text-align: left;
      }
      form h2 { text-align: center; margin-bottom: 15px; color: #444; }
      label { font-size: 14px; font-weight: bold; color: #444; }
      input {
        width: 100%;
        padding: 20px;
        margin: 10px 0 20px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 14px;
      }
      .btn {
        width: 100%;
        padding: 20px;
        background: #a8b5bc;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        cursor: pointer;
      }
      .btn:hover { background: #424647; }
      .privacy { margin-top: 20px; font-size: 13px; color: #555; text-align: center; }
      span { color: green; font-weight: bold; }
      .create { margin-top: 25px; text-align: center; font-size: 14px; color: green; cursor: pointer; }

      /* Responsive styles omitted for brevity (same as before) */
    </style>
  </head>
  <body>
    <div class="top-section">
      <img src="sprodeal.png" alt="Logo" />
      <h1>Spro Deal Customer Service</h1>
      <p>A stable and profitable platform</p>
    </div>

    <form id="loginForm">
      <h2>SIGN IN TO SPRO DEAL</h2>

      <label>Phone</label>
      <input type="text" id="phone" placeholder="Enter Phone Number" required />

      <label>Password</label>
      <div style="position: relative">
        <input
          type="password"
          id="password"
          placeholder="Please Enter Password"
          style="padding-right: 40px"
          required
        />
        <span
          onclick="togglePassword()"
          style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 18px;"
          >üëÅÔ∏è</span
        >
      </div>

      <button class="btn">SIGN IN</button>

      <p class="privacy">
        ‚úî By logging in you agree to our <span>Privacy Policy</span>
      </p>

      <p class="create">create new account?</p>
    </form>

    <script>
// üî• Set your deployed backend URL
const BASE_URL = "https://sprodeal-backend-5.onrender.com";

// Toggle password visibility
function togglePassword() {
    const pass = document.getElementById("password");
    pass.type = pass.type === "password" ? "text" : "password";
}

// Login form submit
document.getElementById("loginForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const phone = document.getElementById("phone").value.trim();
    const password = document.getElementById("password").value.trim();

    // Validation
    if (!/^\d{10}$/.test(phone)) {
        alert("Please enter a valid 10-digit phone number.");
        return;
    }
    if (password.length < 6 || password.length > 15) {
        alert("Password must be between 6 and 15 characters.");
        return;
    }

    try {
        const res = await fetch(`${BASE_URL}/login`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ phone, password }),
        });

        const data = await res.json();

        if (data.success) {
            // Save user_id to localStorage
            localStorage.setItem("user_id", data.user_id);
            // Redirect to verification page
            window.location.href = "verification.html";
        } else {
            alert(data.message || "Login failed");
        }
    } catch (err) {
        console.error("Login Error:", err);
        alert("Error connecting to server. Please try again later.");
    }
});
</script>

  </body>
</html>
